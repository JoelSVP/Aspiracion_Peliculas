<html>

<head>
  <title>Página Principal</title>
  <link rel="stylesheet" href="/stylesheets/style.css">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

</head>

<body>

  <header>
    <div class="container">
      <div class="row ">
        <div class="col-md-9 d-flex align-items-center">
          <img src="/images/claqueta.png" alt="Claqueta" class="img-fluid me-2" width="50">
          <h1>Películas</h1>
        </div>
        <div class="col-md-3 text-end d-flex  align-items-center">
          <p>Test</p>
        </div>
      </div>
    </div>
  </header>

  <section class="container section-padding">
    <h1>Página Principal</h1>
    <input class="btn btn-primary mt-2" type="button" value="Cambia el fondo" onclick="changeBackground()">

    <h2 id="film" class="mt-3"></h2>


    <table>

      <tr>
        <th>Año</th>
        <th>Pelicula</th>
      </tr>

      <tr>
        {{#each films as film}}
        <td>{{film.año}}</td>
        <td>{{film.nombre}}</td>
        {{/each}}
      </tr>
    </table>

  </section>

  <script>
    function changeBackground() {
      let colors = ["#f00", "#0f0", "#00f"];
      let index = Math.floor(Math.random() * colors.length);
      document.body.style.backgroundColor = colors[index];
    }

    async function getPeliculas() {
      let response = await fetch('/api/peliculas');
      let data = await response.json();

      for (let i = 0; i < data.length; i++) {
        document.querySelector('#film').innerHTML = `${data[i].año} - ${data[i].nombre}`
      }

    }

    getPeliculas();

  </script>



</body>

</html>